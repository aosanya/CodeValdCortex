package agency_designer

import (
	"github.com/aosanya/CodeValdCortex/internal/ai"
	"github.com/aosanya/CodeValdCortex/internal/agency"
)

// OverviewContent renders the overview section with three navigation nodes
templ OverviewContent(currentAgency *agency.Agency, conversation *ai.ConversationContext, overview *agency.Overview) {
	<div class="overview-layout">
		<!-- Left Sidebar: Overview Navigation -->
		<aside class="sidebar-panel">
			<header class="sidebar-header">
				<h3 class="sidebar-title">
					<span class="icon"><i class="fas fa-list"></i></span>
					<span>Sections</span>
				</h3>
			</header>
			<div class="sidebar-content">
				@OverviewNavigationList()
			</div>
		</aside>
		
		<!-- Main Panel: Overview Content -->
		<main class="details-panel">
			<header class="details-header">
				<h3 class="details-title" id="overview-title">
					<span class="icon"><i class="fas fa-info-circle"></i></span>
					<span>Introduction</span>
				</h3>
			</header>
			<div class="details-content" id="overview-content">
				<!-- All section contents pre-rendered, toggled by JavaScript -->
				<div id="content-introduction" class="overview-content-section is-active">
					@IntroductionContent(currentAgency, conversation, overview)
				</div>
				<div id="content-goal-definition" class="overview-content-section" style="display: none;">
					@GoalDefinitionContent(currentAgency, conversation)
				</div>
				<div id="content-units-of-work" class="overview-content-section" style="display: none;">
					@UnitsOfWorkContent(currentAgency, conversation)
				</div>
			</div>
		</main>
	</div>
}

// OverviewNavigationList shows the three navigation nodes
templ OverviewNavigationList() {
	<div class="overview-nav-list">
		<div 
			class="overview-nav-item is-active"
			data-section="introduction"
			onclick="selectOverviewSection(this, 'introduction')">
			<div class="nav-icon">
				<i class="fas fa-info-circle"></i>
			</div>
			<div class="nav-info">
				<div class="nav-name">Introduction</div>
				<div class="nav-description">Get started</div>
			</div>
		</div>
		
		<div 
			class="overview-nav-item"
			data-section="goal-definition"
			onclick="selectOverviewSection(this, 'goal-definition')">
			<div class="nav-icon">
				<i class="fas fa-bullseye"></i>
			</div>
			<div class="nav-info">
				<div class="nav-name">Goal Definition</div>
				<div class="nav-description">Define objectives</div>
			</div>
		</div>
		
		<div 
			class="overview-nav-item"
			data-section="units-of-work"
			onclick="selectOverviewSection(this, 'units-of-work')">
			<div class="nav-icon">
				<i class="fas fa-clipboard-list"></i>
			</div>
			<div class="nav-info">
				<div class="nav-name">Units of Work</div>
				<div class="nav-description">Define work items</div>
			</div>
		</div>
	</div>
}

// IntroductionContent shows the introduction section
templ IntroductionContent(currentAgency *agency.Agency, conversation *ai.ConversationContext, overview *agency.Overview) {
	<div class="overview-section">
		@IntroductionCard(currentAgency, conversation, overview)
	</div>
}

// GoalDefinitionContent shows the goal definition section
templ GoalDefinitionContent(currentAgency *agency.Agency, conversation *ai.ConversationContext) {
	<div class="overview-section">
		<!-- AI Goal Operations Toolbar -->
		<div class="box mb-4 p-4">
			<div class="level is-mobile">
				<div class="level-left">
					<div class="level-item">
						<p class="has-text-weight-semibold">AI Goal Operations:</p>
					</div>
				</div>
				<div class="level-right">
					<div class="level-item">
						<div class="buttons">
							<button 
								class="button is-small is-info"
								onclick="processAIGoalOperation(['create'])"
								id="ai-create-goals-btn"
								title="Generate new goals from introduction">
								<span class="icon"><i class="fas fa-sparkles"></i></span>
								<span>Create Goals</span>
							</button>
							<button 
								class="button is-small is-link is-static"
								onclick="processAIGoalOperation(['enhance'])"
								id="ai-enhance-goals-btn"
								title="Select goals to enhance"
								disabled>
								<span class="icon"><i class="fas fa-wand-magic-sparkles"></i></span>
								<span>Enhance Goals</span>
							</button>
							<button 
								class="button is-small is-warning is-static"
								onclick="processAIGoalOperation(['consolidate'])"
								id="ai-consolidate-goals-btn"
								title="Select goals to consolidate"
								disabled>
								<span class="icon"><i class="fas fa-compress"></i></span>
								<span>Consolidate Goals</span>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		@GoalEditorCard()
		@GoalsListCard()
	</div>
}

// UnitsOfWorkContent shows the units of work section
templ UnitsOfWorkContent(currentAgency *agency.Agency, conversation *ai.ConversationContext) {
	<div class="overview-section">
		@UnitOfWorkEditorCard()
		@UnitsOfWorkListCard()
	</div>
}
