{
    "id": "parent",
    "name": "Parent/Guardian Agent",
    "description": "Subscriber agent representing a parent or guardian who tracks their child's school bus in real-time",
    "category": "subscriber",
    "version": "1.0.0",
    "schema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": [
            "parent_id",
            "name",
            "phone_number"
        ],
        "properties": {
            "parent_id": {
                "type": "string",
                "pattern": "^PARENT-[A-Z0-9]{6,12}$",
                "description": "Unique parent/guardian identifier"
            },
            "name": {
                "type": "string",
                "minLength": 2,
                "maxLength": 100,
                "description": "Parent/guardian full name"
            },
            "phone_number": {
                "type": "string",
                "pattern": "^\\+?[1-9]\\d{1,14}$",
                "description": "Contact phone number in E.164 format"
            },
            "email": {
                "type": "string",
                "format": "email",
                "description": "Email address for notifications"
            },
            "child_ids": {
                "type": "array",
                "items": {
                    "type": "string"
                },
                "description": "List of children being tracked"
            },
            "subscribed_bus_ids": {
                "type": "array",
                "items": {
                    "type": "string"
                },
                "description": "School buses currently subscribed to"
            },
            "notification_preferences": {
                "type": "object",
                "properties": {
                    "channels": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "enum": [
                                "push",
                                "sms",
                                "email"
                            ]
                        },
                        "description": "Preferred notification channels"
                    },
                    "quiet_hours": {
                        "type": "object",
                        "properties": {
                            "enabled": {
                                "type": "boolean"
                            },
                            "start_time": {
                                "type": "string",
                                "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
                            },
                            "end_time": {
                                "type": "string",
                                "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
                            }
                        }
                    },
                    "emergency_always_notify": {
                        "type": "boolean",
                        "description": "Receive emergency alerts even during quiet hours"
                    }
                }
            },
            "home_location": {
                "type": "object",
                "properties": {
                    "latitude": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                    },
                    "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                    },
                    "address": {
                        "type": "string",
                        "description": "Human-readable address"
                    }
                },
                "description": "Home location for proximity alerts"
            },
            "pickup_stop_id": {
                "type": "string",
                "description": "Child's designated pickup location"
            },
            "dropoff_stop_id": {
                "type": "string",
                "description": "Child's designated dropoff location"
            },
            "alert_threshold_minutes": {
                "type": "integer",
                "minimum": 1,
                "maximum": 60,
                "description": "Delay threshold for notifications (minutes)"
            },
            "active_tracking": {
                "type": "boolean",
                "description": "Whether currently monitoring bus"
            },
            "school_id": {
                "type": "string",
                "description": "Associated school identifier"
            },
            "subscription_approved": {
                "type": "boolean",
                "description": "Whether subscription has been approved by school"
            }
        }
    },
    "required_capabilities": [
        "bus_subscription",
        "notification_handling",
        "alert_management"
    ],
    "optional_capabilities": [
        "location_tracking",
        "emergency_response",
        "communication"
    ],
    "default_config": {
        "alert_threshold_minutes": 10,
        "notification_channels": [
            "push",
            "sms"
        ],
        "emergency_always_notify": true,
        "proximity_alert_distance_km": 1.0
    },
    "validation_rules": [
        {
            "name": "valid_phone",
            "description": "Phone number must be in valid format",
            "condition": "phone_number matches E.164 format"
        },
        {
            "name": "notification_channel_required",
            "description": "At least one notification channel must be enabled",
            "condition": "len(notification_preferences.channels) > 0"
        }
    ],
    "is_system_type": false,
    "is_enabled": true
}